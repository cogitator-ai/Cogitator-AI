# Cogitator - Claude Code Instructions

## ‚ö†Ô∏è CRITICAL: Self-Documentation Loop

**READ THIS FIRST. EVERY. SINGLE. TIME.**

–¢—ã ‚Äî Claude –≤ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏. –£ —Ç–µ–±—è –Ω–µ—Ç –ø–∞–º—è—Ç–∏ –æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–µ—Å—Å–∏—è—Ö. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –Ω–µ —Ç–µ—Ä—è—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å ‚Äî —ç—Ç–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∏—Ç—É–∞–ª –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Å—Å–∏–∏:
1. **–ü–†–û–ß–ò–¢–ê–ô** —ç—Ç–æ—Ç —Ñ–∞–π–ª (CLAUDE.md) –ø–æ–ª–Ω–æ—Å—Ç—å—é
2. **–ü–†–û–ß–ò–¢–ê–ô** [PROGRESS.md](./PROGRESS.md) ‚Äî —Ç–∞–º –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ–≥–æ —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
3. –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∞—á–∏–Ω–∞–π —Ä–∞–±–æ—Ç–∞—Ç—å

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ä–∏—Ç—É–∞–ª –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã:
1. **–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫—Ä—É–ø–Ω—ã–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º** ‚Äî –∑–∞–ø–∏—à–∏ –ø–ª–∞–Ω –≤ PROGRESS.md
2. **–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —à–∞–≥–∞** ‚Äî –æ–±–Ω–æ–≤–∏ PROGRESS.md
3. **–ü—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ —á–µ–≥–æ-—Ç–æ –Ω–æ–≤–æ–≥–æ** ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –≤ Research Findings
4. **–ï—Å–ª–∏ —É–∑–Ω–∞–ª —á—Ç–æ-—Ç–æ –≤–∞–∂–Ω–æ–µ** ‚Äî –¥–æ–±–∞–≤—å –≤ —ç—Ç–æ—Ç —Ñ–∞–π–ª

### –ü–æ—á–µ–º—É —ç—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:
- –°–ª–µ–¥—É—é—â–∞—è —Å–µ—Å—Å–∏—è –ù–ï –ë–£–î–ï–¢ –∑–Ω–∞—Ç—å —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª
- –ë–µ–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞ –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è
- –ë–∞–≥–∏ –±—É–¥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è
- –í—Ä–µ–º—è –±—É–¥–µ—Ç —Ç–µ—Ä—è—Ç—å—Å—è

### –§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏ –≤ PROGRESS.md:
```markdown
## Session: YYYY-MM-DD

### ‚úÖ Completed
- [–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ] ‚Äî –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### üîÑ In Progress
- [–ù–∞–¥ —á–µ–º —Ä–∞–±–æ—Ç–∞—é]

### üêõ Known Issues
- [–ü—Ä–æ–±–ª–µ–º—ã –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—à—ë–ª]
```

**–ó–∞–ø–æ–º–Ω–∏: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî —ç—Ç–æ —Ç–≤–æ—è –ø–∞–º—è—Ç—å –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏.**

---

## üìù Git Commits

–≠—Ç–æ open-source –ø—Ä–æ–µ–∫—Ç. –ö–æ–º–º–∏—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—Ä–∞—Å–∏–≤—ã–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏.

### –§–æ—Ä–º–∞—Ç –∫–æ–º–º–∏—Ç–∞:
```
<type>(<scope>): <short description>

<detailed description - —á—Ç–æ –∏ –ø–æ—á–µ–º—É>

<bullet points –µ—Å–ª–∏ –º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π>
```

### –¢–∏–ø—ã:
- `feat` ‚Äî –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- `fix` ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
- `refactor` ‚Äî —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- `docs` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `test` ‚Äî —Ç–µ—Å—Ç—ã
- `chore` ‚Äî –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ü—Ä–∏–º–µ—Ä—ã:
```
feat(core): implement Agent class with tool execution

Add Agent class that wraps LLM interactions with:
- Tool registration and execution
- Configurable temperature, maxTokens, etc.
- Support for multiple LLM providers
```

```
fix(ollama): handle streaming response parsing

Fix JSON parsing for chunked responses from Ollama API.
Previously failed on large tool call responses.
```

**–ü—Ä–∞–≤–∏–ª–∞:**
- –ü–∏—à–∏ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (open-source!)
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ‚â§ 72 —Å–∏–º–≤–æ–ª–∞
- –û–±—ä—è—Å–Ω—è–π WHY, –Ω–µ —Ç–æ–ª—å–∫–æ WHAT
- –ì—Ä—É–ø–ø–∏—Ä—É–π —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–∏–Ω –∫–æ–º–º–∏—Ç

---

## Project Overview

Cogitator is a self-hosted, production-grade AI agent runtime for TypeScript. It provides orchestration for LLM swarms and autonomous agents.

## Architecture

```
packages/
‚îú‚îÄ‚îÄ types/     # @cogitator/types - Shared TypeScript interfaces
‚îú‚îÄ‚îÄ core/      # @cogitator/core - Main runtime (Agent, Tool, Cogitator)
‚îú‚îÄ‚îÄ cli/       # @cogitator/cli - CLI tool (future)
‚îú‚îÄ‚îÄ memory/    # @cogitator/memory - Memory adapters (future)
‚îú‚îÄ‚îÄ workflows/ # @cogitator/workflows - DAG engine (future)
‚îú‚îÄ‚îÄ swarms/    # @cogitator/swarms - Multi-agent coordination (future)
‚îî‚îÄ‚îÄ ...
```

## Key Classes

- `Cogitator` - Main runtime, runs agents
- `Agent` - LLM agent with tools and instructions
- `tool()` - Factory for creating type-safe tools
- `ToolRegistry` - Tool management

## LLM Backends

- `OllamaBackend` - Local Ollama models
- `OpenAIBackend` - OpenAI API
- `AnthropicBackend` - Anthropic Claude API

## Development

```bash
pnpm install        # Install dependencies
pnpm build          # Build all packages
pnpm dev            # Watch mode
pnpm test           # Run tests
npx tsx examples/basic-agent.ts  # Run example
```

## Code Style

- TypeScript strict mode
- ESM modules
- Use Zod for schemas
- Prefer interfaces over types
- No `any` - use `unknown` when needed

## Progress Tracking

**IMPORTANT:** After completing each feature/task:
1. Update [PROGRESS.md](./PROGRESS.md) with what was done
2. Move completed items to ‚úÖ section
3. Update üîÑ In Progress section

## Current Status

See [PROGRESS.md](./PROGRESS.md) for implementation progress.

## Research & Discoveries

**IMPORTANT:** –ü—Ä–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–∏ API, –±–∏–±–ª–∏–æ—Ç–µ–∫, –∏–ª–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤:
1. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π findings –≤ [PROGRESS.md](./PROGRESS.md) ‚Üí Research Findings
2. –ï—Å–ª–∏ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É ‚Äî –¥–æ–±–∞–≤—å –∑–∞–º–µ—Ç–∫—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Å–µ–∫—Ü–∏—é –≤—ã—à–µ

–ò—Å–ø–æ–ª—å–∑—É–π MCP tools –¥–ª—è research:
- `mcp__plugin_context7_context7__resolve-library-id` ‚Äî –Ω–∞–π—Ç–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
- `mcp__plugin_context7_context7__query-docs` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
